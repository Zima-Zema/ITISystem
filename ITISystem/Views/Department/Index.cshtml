@model IEnumerable<ITISystem.Models.Department>
@using ITISystem.Models

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<div id="divtable">
    <table class="table table-hover table-bordered">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Capacity)
                </th>
                <th>
                    Manager
                    @*@Html.DisplayNameFor(model => model.manger_key )*@
                </th>
                <th></th>
            </tr>
        </thead>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Capacity)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.instructor_mang.Name)
                </td>
                <td>
                    @Ajax.ActionLink("Edit", "Edit", "Department", new { id = item.Department_Id }, new AjaxOptions()
               {
                   UpdateTargetId = "divedit",
                   InsertionMode = InsertionMode.Replace,
                   HttpMethod = "Get",
                   OnSuccess = "fun()"

               })
                    @Ajax.ActionLink("Delete", "Delete", "Department", new { id = item.Department_Id }, new AjaxOptions()
               {
                   UpdateTargetId="divdelete",
                   InsertionMode=InsertionMode.Replace,
                   HttpMethod="Get",
                   OnSuccess="fun2()"
               })
                    @*@Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
            @Html.ActionLink("Details", "Details", new { id = item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.Id })*@
                </td>
            </tr>
        }

    </table>

</div>
<div class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal" id="divedit" >
                @Html.Partial("Edit",Model);
            </div>
        </div>
    </div>
    </div>
<div id="divdelete">

</div>
<script>
    function fyn() {
        $("#divedit").modal("toggle");
    }
</script>
<script>
    function fyn() {
        $("#divdelete").modal("toggle");
    }
</script>
